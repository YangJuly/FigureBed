<mxfile host="app.diagrams.net" modified="2020-12-16T14:18:18.129Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="3iju9loBcd5taV2POch6" version="13.11.0" type="github">
  <diagram id="3N6pxjV99l4ixwbKxjPy" name="Page-1">
    <mxGraphModel dx="9271" dy="6719" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="JTOYpKqAFPkILQDikOHW-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-63" target="JTOYpKqAFPkILQDikOHW-29">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="690" y="520" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-70" value="总库存无剩余，更新标志位" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JTOYpKqAFPkILQDikOHW-67">
          <mxGeometry x="-0.8199" relative="1" as="geometry">
            <mxPoint x="-80.03" y="-21.29" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-63" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="835" width="315" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-60" target="JTOYpKqAFPkILQDikOHW-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-68" value="成功" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JTOYpKqAFPkILQDikOHW-65">
          <mxGeometry x="-0.05" y="-1" relative="1" as="geometry">
            <mxPoint x="21" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-60" target="JTOYpKqAFPkILQDikOHW-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-60" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="152.5" y="835" width="315" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-62" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="152.5" y="965" width="315" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-57" target="JTOYpKqAFPkILQDikOHW-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-57" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="152.5" y="710" width="315" height="90" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-48" target="JTOYpKqAFPkILQDikOHW-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="185" y="370" width="250" height="100" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-8" target="JTOYpKqAFPkILQDikOHW-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-8" value="入参：用户ID，券规则ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="210" y="230" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-29" target="JTOYpKqAFPkILQDikOHW-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-29" value="校验券库存标志位" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="210" y="500" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-30" target="JTOYpKqAFPkILQDikOHW-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-30" value="查询券规则信息" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="210" y="300" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-31" value="规则有效期" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="230" y="400" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-32" value="规则状态" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="330" y="400" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-34" target="JTOYpKqAFPkILQDikOHW-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-34" value="风控校验" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="210" y="570" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-35">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="310" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-35" value="券领取资格校验" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="210" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-36" value="增加券单人领取次数" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="170" y="740" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-40" value="异步记录流水日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="320" y="740" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-41" value="增加券总领取次数" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="170" y="860" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-42" value="异步记录流水日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="320" y="860" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-43" value="写入券实体" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="170" y="990" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-44" value="异步记录流水日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="320" y="990" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-45" value="回滚券单人领取次数" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="550" y="860" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-46" value="异步记录流水日志" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="700" y="860" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-52" value="券规则校验" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="185" y="376" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-69" value="失败" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="860" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-75" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-71" target="JTOYpKqAFPkILQDikOHW-72">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-71" value="入参：密文Token（用户ID，券规则ID，时间戳等）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="152.5" y="10" width="315" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-72" target="JTOYpKqAFPkILQDikOHW-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-72" value="解密，密文内容与登录态校验" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="152.5" y="90" width="315" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="JTOYpKqAFPkILQDikOHW-71">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="310" y="-50" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-77" value="用户" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="295" y="-130" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="JTOYpKqAFPkILQDikOHW-78">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="330" y="-100.00000000000023" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-78" value="下发：密文Token（用户ID，券规则ID，时间戳等）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="490" y="-125" width="315" height="50" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-85" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="-10" width="390" height="170" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-86" value="CGI" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="-10" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-87" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="200" width="750" height="870" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-88" value="MVP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="200" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-90" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="440" y="-160" width="380" height="130" as="geometry" />
        </mxCell>
        <mxCell id="JTOYpKqAFPkILQDikOHW-91" value="OPS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="420" y="-160" width="80" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
